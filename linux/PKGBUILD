# Maintainer: MrGraf 
pkgname=notebox
pkgver=1.0.0
pkgrel=1
pkgdesc="Markdown notes app"
arch=('x86_64')
url="https://github.com/MrGrafGitHub/notebox"
license=('MIT')

depends=('nodejs' 'python' 'python-flask' 'python-flask-cors')
makedepends=('npm')

source=("https://github.com/MrGrafGitHub/notebox/archive/refs/tags/v${pkgver}.tar.gz")
md5sums=('SKIP')

build() {
  cd "$srcdir/notebox-$pkgver/frontend"
  npm install
  npm run build
}

package() {
  cd "$srcdir/notebox-$pkgver"
  install -Dm644 linux/notebox.desktop "$pkgdir/usr/share/applications/notebox.desktop"
  install -Dm755 linux/install.sh "$pkgdir/usr/bin/notebox-install.sh"

  mkdir -p "$pkgdir/opt/notebox"
  cp -r frontend/build backend "$pkgdir/opt/notebox/"
}
